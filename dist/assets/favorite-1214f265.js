import{i as a}from"./index-d1851a0a.js";import{a as s}from"./axios-3e40ca62.js";const n=a("favorite",{state(){return{favorites:[]}},actions:{getMyFavorite:async function(){try{(await s({method:"get",url:"https://server-kfc-deploy-production.up.railway.app/customers/favorite",headers:{access_token:localStorage.getItem("access_token")}})).data.data.forEach(r=>{r.product.favoriteId=r.id,this.favorites.push(r.product)})}catch(t){console.log(t)}},addFavorite:async function(t){try{if(this.favorites.find(o=>o.id===t))throw{message:"sudah ada di list favorite"};await s({method:"post",url:"https://server-kfc-deploy-production.up.railway.app/customers//favorite/"+t,headers:{access_token:localStorage.getItem("access_token")}}),this.favorites=[],this.getMyFavorite()}catch(e){console.log(e)}},destroyFavorite:async function(t){try{const e=this.favorites.filter(o=>o.favoriteId!==t);this.favorites=e,window.location.reload(),await s({method:"delete",url:"https://server-kfc-deploy-production.up.railway.app/customers//favorite/"+t,headers:{access_token:localStorage.getItem("access_token")}})}catch(e){console.log(e)}}},getters:{countAll:function(){return this.favorite.length}}});export{n as u};
